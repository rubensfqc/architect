{% extends "architect_app/baseArchitect.html" %}
{% load widget_tweaks %}

{% block title %}{% if contract %}Edit{% else %}Add{% endif %} Contract{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto p-6">
    <div class="flex justify-between items-center mb-8">
        <div>
            <h1 class="text-3xl font-bold text-gray-900">
                {% if contract %}Edit Contract{% else %}New Contract{% endif %}
            </h1>
            <p class="text-gray-500 text-sm">Manage legal terms and project agreements.</p>
        </div>
        
        <a href="{% url 'architects_contracts' %}" 
           class="group flex items-center text-gray-500 hover:text-indigo-600 font-medium transition duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 transform group-hover:-translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Back to List
        </a>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
        <form method="post" class="p-8">
            {% csrf_token %}

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {% for field in form %}
                    {% if field.field.widget.input_type == "checkbox" %}
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200 md:col-span-2 shadow-sm">
                            <div class="flex flex-col">
                                <label class="font-semibold text-gray-700 text-sm">{{ field.label }}</label>
                                {% if field.help_text %}
                                    <p class="text-gray-400 text-xs">{{ field.help_text }}</p>
                                {% endif %}
                            </div>
                            
                            <label class="relative inline-flex items-center cursor-pointer">
                                {% render_field field class="sr-only peer" %}
                                <div class="w-14 h-7 bg-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-500"></div>
                            </label>
                        </div>
                    {% else %}
                        <div class="flex flex-col {% if field.name == 'terms' or field.name == 'notes' %}md:col-span-2{% endif %}">
                            <label class="mb-2 font-semibold text-gray-700 text-sm">{{ field.label }}</label>
                            {% render_field field class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition" %}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <div class="mt-10 pt-6 border-t border-gray-100 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-3 w-full md:w-auto">
                    <button type="submit" 
                            class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 px-8 rounded-lg transition shadow-md w-full md:w-auto">
                        Save Contract
                    </button>
                    <a href="{% url 'architects_contracts' %}" 
                       class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-2.5 px-8 rounded-lg transition text-center w-full md:w-auto">
                        Cancel
                    </a>
                </div>

                {% if contract %}
                <a href="{% url 'contract_delete' contract.pk %}" 
                   class="text-red-500 hover:text-red-700 hover:bg-red-50 px-4 py-2 rounded-lg transition text-sm font-semibold">
                    Delete Contract
                </a>
                {% endif %}
            </div>
        </form>
    </div>
</div>
{% endblock %}